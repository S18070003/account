<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.ProjectMapper">
  <resultMap id="BaseResultMap" type="com.example.demo.entity.Project">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    <id column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="department" jdbcType="NVARCHAR" property="department" />
    <result column="projectgeneral" jdbcType="NVARCHAR" property="projectgeneral" />
    <result column="projectestimateamount" jdbcType="DOUBLE" property="projectestimateamount" />
    <result column="projectcharger" jdbcType="NVARCHAR" property="projectcharger" />
    <result column="bidabroad" jdbcType="NVARCHAR" property="bidabroad" />
    <result column="bidid" jdbcType="NVARCHAR" property="bidid" />
    <result column="bidreceivedate" jdbcType="DATE" property="bidreceivedate" />
    <result column="bidstopdate" jdbcType="DATE" property="bidstopdate" />
    <result column="bidregion" jdbcType="NVARCHAR" property="bidregion" />
    <result column="bidrecordyn" jdbcType="NVARCHAR" property="bidrecordyn" />
    <result column="bidsafegrade" jdbcType="NVARCHAR" property="bidsafegrade" />
    <result column="bidguaranteeyn" jdbcType="NCHAR" property="bidguaranteeyn" />
    <result column="bidguaranteetype" jdbcType="NVARCHAR" property="bidguaranteetype" />
    <result column="bidguaranteemoney" jdbcType="DOUBLE" property="bidguaranteemoney" />
    <result column="bidoperator" jdbcType="NVARCHAR" property="bidoperator" />
    <result column="bidoprateregion" jdbcType="NVARCHAR" property="bidoprateregion" />
    <result column="bidservicetype" jdbcType="NVARCHAR" property="bidservicetype" />
    <result column="bidworkload" jdbcType="NVARCHAR" property="bidworkload" />
    <result column="projectprogress" jdbcType="NVARCHAR" property="projectprogress" />
    <result column="projectproblem" jdbcType="NVARCHAR" property="projectproblem" />
    <result column="contractyear" jdbcType="INTEGER" property="contractyear" />
    <result column="contractdepartment" jdbcType="NVARCHAR" property="contractdepartment" />
    <result column="contractopdepartment" jdbcType="NVARCHAR" property="contractopdepartment" />
    <result column="contractobject" jdbcType="NVARCHAR" property="contractobject" />
    <result column="projectbuildtime" jdbcType="DATE" property="projectbuildtime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    projectid, projectname, department, projectgeneral, projectestimateamount, projectcharger, 
    bidabroad, bidid, bidreceivedate, bidstopdate, bidregion, bidrecordyn, bidsafegrade, 
    bidguaranteeyn, bidguaranteetype, bidguaranteemoney, bidoperator, bidoprateregion, 
    bidservicetype, bidworkload, projectprogress, projectproblem, contractyear, contractdepartment, 
    contractopdepartment, contractobject, projectbuildtime
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from Project
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    delete from Project
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </delete>
  <insert id="insert" parameterType="com.example.demo.entity.Project">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    insert into Project (projectid, projectname, department, 
      projectgeneral, projectestimateamount, 
      projectcharger, bidabroad, bidid, 
      bidreceivedate, bidstopdate, bidregion, 
      bidrecordyn, bidsafegrade, bidguaranteeyn, 
      bidguaranteetype, bidguaranteemoney, bidoperator, 
      bidoprateregion, bidservicetype, bidworkload, 
      projectprogress, projectproblem, contractyear, 
      contractdepartment, contractopdepartment, 
      contractobject, projectbuildtime)
    values (#{projectid,jdbcType=NVARCHAR}, #{projectname,jdbcType=NVARCHAR}, #{department,jdbcType=NVARCHAR}, 
      #{projectgeneral,jdbcType=NVARCHAR}, #{projectestimateamount,jdbcType=DOUBLE}, 
      #{projectcharger,jdbcType=NVARCHAR}, #{bidabroad,jdbcType=NVARCHAR}, #{bidid,jdbcType=NVARCHAR}, 
      #{bidreceivedate,jdbcType=DATE}, #{bidstopdate,jdbcType=DATE}, #{bidregion,jdbcType=NVARCHAR}, 
      #{bidrecordyn,jdbcType=NVARCHAR}, #{bidsafegrade,jdbcType=NVARCHAR}, #{bidguaranteeyn,jdbcType=NCHAR}, 
      #{bidguaranteetype,jdbcType=NVARCHAR}, #{bidguaranteemoney,jdbcType=DOUBLE}, #{bidoperator,jdbcType=NVARCHAR}, 
      #{bidoprateregion,jdbcType=NVARCHAR}, #{bidservicetype,jdbcType=NVARCHAR}, #{bidworkload,jdbcType=NVARCHAR}, 
      #{projectprogress,jdbcType=NVARCHAR}, #{projectproblem,jdbcType=NVARCHAR}, #{contractyear,jdbcType=INTEGER}, 
      #{contractdepartment,jdbcType=NVARCHAR}, #{contractopdepartment,jdbcType=NVARCHAR}, 
      #{contractobject,jdbcType=NVARCHAR}, #{projectbuildtime,jdbcType=DATE})
  </insert>
  <insert id="insertSelective" parameterType="com.example.demo.entity.Project">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    insert into Project
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="projectid != null">
        projectid,
      </if>
      <if test="projectname != null">
        projectname,
      </if>
      <if test="department != null">
        department,
      </if>
      <if test="projectgeneral != null">
        projectgeneral,
      </if>
      <if test="projectestimateamount != null">
        projectestimateamount,
      </if>
      <if test="projectcharger != null">
        projectcharger,
      </if>
      <if test="bidabroad != null">
        bidabroad,
      </if>
      <if test="bidid != null">
        bidid,
      </if>
      <if test="bidreceivedate != null">
        bidreceivedate,
      </if>
      <if test="bidstopdate != null">
        bidstopdate,
      </if>
      <if test="bidregion != null">
        bidregion,
      </if>
      <if test="bidrecordyn != null">
        bidrecordyn,
      </if>
      <if test="bidsafegrade != null">
        bidsafegrade,
      </if>
      <if test="bidguaranteeyn != null">
        bidguaranteeyn,
      </if>
      <if test="bidguaranteetype != null">
        bidguaranteetype,
      </if>
      <if test="bidguaranteemoney != null">
        bidguaranteemoney,
      </if>
      <if test="bidoperator != null">
        bidoperator,
      </if>
      <if test="bidoprateregion != null">
        bidoprateregion,
      </if>
      <if test="bidservicetype != null">
        bidservicetype,
      </if>
      <if test="bidworkload != null">
        bidworkload,
      </if>
      <if test="projectprogress != null">
        projectprogress,
      </if>
      <if test="projectproblem != null">
        projectproblem,
      </if>
      <if test="contractyear != null">
        contractyear,
      </if>
      <if test="contractdepartment != null">
        contractdepartment,
      </if>
      <if test="contractopdepartment != null">
        contractopdepartment,
      </if>
      <if test="contractobject != null">
        contractobject,
      </if>
      <if test="projectbuildtime != null">
        projectbuildtime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="projectid != null">
        #{projectid,jdbcType=NVARCHAR},
      </if>
      <if test="projectname != null">
        #{projectname,jdbcType=NVARCHAR},
      </if>
      <if test="department != null">
        #{department,jdbcType=NVARCHAR},
      </if>
      <if test="projectgeneral != null">
        #{projectgeneral,jdbcType=NVARCHAR},
      </if>
      <if test="projectestimateamount != null">
        #{projectestimateamount,jdbcType=DOUBLE},
      </if>
      <if test="projectcharger != null">
        #{projectcharger,jdbcType=NVARCHAR},
      </if>
      <if test="bidabroad != null">
        #{bidabroad,jdbcType=NVARCHAR},
      </if>
      <if test="bidid != null">
        #{bidid,jdbcType=NVARCHAR},
      </if>
      <if test="bidreceivedate != null">
        #{bidreceivedate,jdbcType=DATE},
      </if>
      <if test="bidstopdate != null">
        #{bidstopdate,jdbcType=DATE},
      </if>
      <if test="bidregion != null">
        #{bidregion,jdbcType=NVARCHAR},
      </if>
      <if test="bidrecordyn != null">
        #{bidrecordyn,jdbcType=NVARCHAR},
      </if>
      <if test="bidsafegrade != null">
        #{bidsafegrade,jdbcType=NVARCHAR},
      </if>
      <if test="bidguaranteeyn != null">
        #{bidguaranteeyn,jdbcType=NCHAR},
      </if>
      <if test="bidguaranteetype != null">
        #{bidguaranteetype,jdbcType=NVARCHAR},
      </if>
      <if test="bidguaranteemoney != null">
        #{bidguaranteemoney,jdbcType=DOUBLE},
      </if>
      <if test="bidoperator != null">
        #{bidoperator,jdbcType=NVARCHAR},
      </if>
      <if test="bidoprateregion != null">
        #{bidoprateregion,jdbcType=NVARCHAR},
      </if>
      <if test="bidservicetype != null">
        #{bidservicetype,jdbcType=NVARCHAR},
      </if>
      <if test="bidworkload != null">
        #{bidworkload,jdbcType=NVARCHAR},
      </if>
      <if test="projectprogress != null">
        #{projectprogress,jdbcType=NVARCHAR},
      </if>
      <if test="projectproblem != null">
        #{projectproblem,jdbcType=NVARCHAR},
      </if>
      <if test="contractyear != null">
        #{contractyear,jdbcType=INTEGER},
      </if>
      <if test="contractdepartment != null">
        #{contractdepartment,jdbcType=NVARCHAR},
      </if>
      <if test="contractopdepartment != null">
        #{contractopdepartment,jdbcType=NVARCHAR},
      </if>
      <if test="contractobject != null">
        #{contractobject,jdbcType=NVARCHAR},
      </if>
      <if test="projectbuildtime != null">
        #{projectbuildtime,jdbcType=DATE},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.example.demo.entity.Project">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    update Project
    <set>
      <if test="projectname != null">
        projectname = #{projectname,jdbcType=NVARCHAR},
      </if>
      <if test="department != null">
        department = #{department,jdbcType=NVARCHAR},
      </if>
      <if test="projectgeneral != null">
        projectgeneral = #{projectgeneral,jdbcType=NVARCHAR},
      </if>
      <if test="projectestimateamount != null">
        projectestimateamount = #{projectestimateamount,jdbcType=DOUBLE},
      </if>
      <if test="projectcharger != null">
        projectcharger = #{projectcharger,jdbcType=NVARCHAR},
      </if>
      <if test="bidabroad != null">
        bidabroad = #{bidabroad,jdbcType=NVARCHAR},
      </if>
      <if test="bidid != null">
        bidid = #{bidid,jdbcType=NVARCHAR},
      </if>
      <if test="bidreceivedate != null">
        bidreceivedate = #{bidreceivedate,jdbcType=DATE},
      </if>
      <if test="bidstopdate != null">
        bidstopdate = #{bidstopdate,jdbcType=DATE},
      </if>
      <if test="bidregion != null">
        bidregion = #{bidregion,jdbcType=NVARCHAR},
      </if>
      <if test="bidrecordyn != null">
        bidrecordyn = #{bidrecordyn,jdbcType=NVARCHAR},
      </if>
      <if test="bidsafegrade != null">
        bidsafegrade = #{bidsafegrade,jdbcType=NVARCHAR},
      </if>
      <if test="bidguaranteeyn != null">
        bidguaranteeyn = #{bidguaranteeyn,jdbcType=NCHAR},
      </if>
      <if test="bidguaranteetype != null">
        bidguaranteetype = #{bidguaranteetype,jdbcType=NVARCHAR},
      </if>
      <if test="bidguaranteemoney != null">
        bidguaranteemoney = #{bidguaranteemoney,jdbcType=DOUBLE},
      </if>
      <if test="bidoperator != null">
        bidoperator = #{bidoperator,jdbcType=NVARCHAR},
      </if>
      <if test="bidoprateregion != null">
        bidoprateregion = #{bidoprateregion,jdbcType=NVARCHAR},
      </if>
      <if test="bidservicetype != null">
        bidservicetype = #{bidservicetype,jdbcType=NVARCHAR},
      </if>
      <if test="bidworkload != null">
        bidworkload = #{bidworkload,jdbcType=NVARCHAR},
      </if>
      <if test="projectprogress != null">
        projectprogress = #{projectprogress,jdbcType=NVARCHAR},
      </if>
      <if test="projectproblem != null">
        projectproblem = #{projectproblem,jdbcType=NVARCHAR},
      </if>
      <if test="contractyear != null">
        contractyear = #{contractyear,jdbcType=INTEGER},
      </if>
      <if test="contractdepartment != null">
        contractdepartment = #{contractdepartment,jdbcType=NVARCHAR},
      </if>
      <if test="contractopdepartment != null">
        contractopdepartment = #{contractopdepartment,jdbcType=NVARCHAR},
      </if>
      <if test="contractobject != null">
        contractobject = #{contractobject,jdbcType=NVARCHAR},
      </if>
      <if test="projectbuildtime != null">
        projectbuildtime = #{projectbuildtime,jdbcType=DATE},
      </if>
    </set>
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.example.demo.entity.Project">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Oct 26 11:24:13 CST 2019.
    -->
    update Project
    set projectname = #{projectname,jdbcType=NVARCHAR},
      department = #{department,jdbcType=NVARCHAR},
      projectgeneral = #{projectgeneral,jdbcType=NVARCHAR},
      projectestimateamount = #{projectestimateamount,jdbcType=DOUBLE},
      projectcharger = #{projectcharger,jdbcType=NVARCHAR},
      bidabroad = #{bidabroad,jdbcType=NVARCHAR},
      bidid = #{bidid,jdbcType=NVARCHAR},
      bidreceivedate = #{bidreceivedate,jdbcType=DATE},
      bidstopdate = #{bidstopdate,jdbcType=DATE},
      bidregion = #{bidregion,jdbcType=NVARCHAR},
      bidrecordyn = #{bidrecordyn,jdbcType=NVARCHAR},
      bidsafegrade = #{bidsafegrade,jdbcType=NVARCHAR},
      bidguaranteeyn = #{bidguaranteeyn,jdbcType=NCHAR},
      bidguaranteetype = #{bidguaranteetype,jdbcType=NVARCHAR},
      bidguaranteemoney = #{bidguaranteemoney,jdbcType=DOUBLE},
      bidoperator = #{bidoperator,jdbcType=NVARCHAR},
      bidoprateregion = #{bidoprateregion,jdbcType=NVARCHAR},
      bidservicetype = #{bidservicetype,jdbcType=NVARCHAR},
      bidworkload = #{bidworkload,jdbcType=NVARCHAR},
      projectprogress = #{projectprogress,jdbcType=NVARCHAR},
      projectproblem = #{projectproblem,jdbcType=NVARCHAR},
      contractyear = #{contractyear,jdbcType=INTEGER},
      contractdepartment = #{contractdepartment,jdbcType=NVARCHAR},
      contractopdepartment = #{contractopdepartment,jdbcType=NVARCHAR},
      contractobject = #{contractobject,jdbcType=NVARCHAR},
      projectbuildtime = #{projectbuildtime,jdbcType=DATE}
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </update>
  <resultMap id="WeeklyBase" type="com.example.demo.model.WeeklyBase">
    <id column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="department" jdbcType="NVARCHAR" property="department" />
    <result column="projectgeneral" jdbcType="NVARCHAR" property="projectgeneral" />
    <result column="projectestimateamount" jdbcType="NVARCHAR" property="projectestimateamount" />
    <result column="projectcharger" jdbcType="NVARCHAR" property="projectcharger" />
  </resultMap>
  <resultMap id="BiddingBase" type="com.example.demo.model.BiddingBase">
    <id column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="bidabroad" jdbcType="NVARCHAR" property="bidabroad" />
    <result column="bidid" jdbcType="NVARCHAR" property="bidid" />
    <result column="bidreceivedate" jdbcType="DATE" property="bidreceivedate" />
    <result column="bidstopdate" jdbcType="DATE" property="bidstopdate" />
    <result column="bidregion" jdbcType="NVARCHAR" property="bidregion" />
    <result column="bidrecordyn" jdbcType="NVARCHAR" property="bidrecordyn" />
    <result column="bidsafegrade" jdbcType="NVARCHAR" property="bidsafegrade" />
    <result column="bidguaranteeyn" jdbcType="NVARCHAR" property="bidguaranteeyn" />
    <result column="bidguaranteetype" jdbcType="NVARCHAR" property="bidguaranteetype" />
    <result column="bidguaranteemoney" jdbcType="DOUBLE" property="bidguaranteemoney" />
    <result column="bidoperator" jdbcType="NVARCHAR" property="bidoperator" />
    <result column="bidoprateregion" jdbcType="NVARCHAR" property="bidoprateregion" />
    <result column="bidservicetype" jdbcType="NVARCHAR" property="bidservicetype" />
    <result column="bidworkload" jdbcType="NVARCHAR" property="bidworkload" />
    <result column="projectprogress" jdbcType="NVARCHAR" property="projectprogress" />
    <result column="projectproblem" jdbcType="NVARCHAR" property="projectproblem" />
  </resultMap>
  <resultMap id="LedgerBase" type="com.example.demo.model.LedgerBase">
    <id column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="bidregion" jdbcType="NVARCHAR" property="bidregion" />
    <result column="bidoprateregion" jdbcType="NVARCHAR" property="bidoprateregion" />
    <result column="contractyear" jdbcType="INTEGER" property="contractyear" />
    <result column="contractdepartment" jdbcType="NVARCHAR" property="contractdepartment" />
    <result column="contractopdepartment" jdbcType="NVARCHAR" property="contractopdepartment" />
    <result column="contractobject" jdbcType="NVARCHAR" property="contractobject" />
  </resultMap>
  <resultMap id="NewProjectInfo" type="com.example.demo.model.NewProjectInfo">
    <id column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="projectgeneral" jdbcType="NVARCHAR" property="projectgeneral" />
    <result column="projectprogress" jdbcType="NVARCHAR" property="projectprogress" />
    <result column="projectproblem" jdbcType="NVARCHAR" property="projectproblem" />
    <result column="projectbuildtime" jdbcType="DATE" property="projectbuildtime" />
  </resultMap>
  <sql id="Base_Weekly">
    projectid, projectname, department, projectgeneral, projectestimateamount, projectcharger
  </sql>
  <sql id="Base_Bidding">
    projectid, projectname, bidabroad, bidid, bidreceivedate, bidstopdate, bidregion, bidrecordyn, bidsafegrade,bidguaranteeyn,
    bidguaranteetype, bidguaranteemoney, bidoperator, bidoprateregion, bidservicetype,
    bidworkload, projectprogress, projectproblem
  </sql>
  <sql id="Base_Ledger">
    projectid, projectname, bidregion,  bidoprateregion, contractyear, contractdepartment, contractopdepartment, contractobject
  </sql>
  <sql id="New_Project_Info">
    projectid, projectname, projectgeneral,projectprogress,projectproblem,projectbuildtime
  </sql>
  <select id="selectWeeklyBase" parameterType="java.lang.String" resultMap="WeeklyBase">
    select
    <include refid="Base_Weekly" />
    from Project
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </select>
  <select id="selectBiddingBase" parameterType="java.lang.String" resultMap="BiddingBase">
    select
    <include refid="Base_Bidding" />
    from Project
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </select>
  <select id="selectLedgerBase" parameterType="java.lang.String" resultMap="LedgerBase">
    select
    <include refid="Base_Ledger" />
    from Project
    where projectid = #{projectid,jdbcType=NVARCHAR}
  </select>
  <select id="selectAll" parameterType="java.lang.String" resultMap="BaseResultMap">
    select * from Project
  </select>
  <select id="getCode" resultType="String">
    select SUBSTRING(max(a.projectid),11,13)  from Project a
  </select>
  <select id="getProjectInMonth" resultMap="NewProjectInfo">
    select
    <include refid="New_Project_Info" />
     from Project
    <if test="starttime != null and endtime != null">
      where projectbuildtime  &gt;= #{starttime} and projectbuildtime &lt;= #{endtime}
    </if>
  </select>
  <select id="getProjectIdByProjectname" resultType="java.lang.String">
    select projectid from Project where projectname=#{projectname}
  </select>
  <delete id="deleteWeeklyFromProject" parameterType="java.lang.String">
  delete w from RelationProjectWeekly as r inner join  Weekly as w
  on r.weeklyid=w.id where r.projectid=#{projectid}
  </delete>
  <delete id="deleteRelationProjectWeeklyFromProject" parameterType="java.lang.String">
    delete  from RelationProjectWeekly where projectid=#{projectid}
  </delete>
  <delete id="deleteBiddingFromProject" parameterType="java.lang.String">
    delete b from RelationProjectBidding as r inner join  Bidding as b
  on r.biddingid=b.id where r.projectid=#{projectid}
  </delete>
  <delete id="deleteRelationProjectBiddingFromProject" parameterType="java.lang.String">
    delete  from RelationProjectBidding where projectid=#{projectid}
  </delete>
  <delete id="deleteLedgerFromProject" parameterType="java.lang.String">
  delete c from RelationProjectLedger as r inner join  ContractLedger as c
  on r.ledgerid=c.id where r.projectid=#{projectid}
  </delete>
  <delete id="deleteRelationProjectLedgerFromProject" parameterType="java.lang.String">
     delete  from RelationProjectLedger where projectid=#{projectid}
  </delete>
</mapper>