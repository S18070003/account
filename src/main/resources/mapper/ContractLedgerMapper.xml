<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.ContractLedgerMapper">
  <resultMap id="BaseResultMap" type="com.example.demo.entity.ContractLedger">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="contractid" jdbcType="NVARCHAR" property="contractid" />
    <result column="contractid2" jdbcType="NVARCHAR" property="contractid2" />
    <result column="contractsigndate" jdbcType="DATE" property="contractsigndate" />
    <result column="constructionstartdate" jdbcType="DATE" property="constructionstartdate" />
    <result column="constructionenddate" jdbcType="DATE" property="constructionenddate" />
    <result column="contractmoneypredict0cny" jdbcType="DOUBLE" property="contractmoneypredict0cny" />
    <result column="contractmoneypredict0usd" jdbcType="DOUBLE" property="contractmoneypredict0usd" />
    <result column="contractmoneypredicttotal0rmb" jdbcType="DOUBLE" property="contractmoneypredicttotal0rmb" />
    <result column="contractmoneypredicttotal0usd" jdbcType="DOUBLE" property="contractmoneypredicttotal0usd" />
    <result column="contractmoneypredict1rmb" jdbcType="DOUBLE" property="contractmoneypredict1rmb" />
    <result column="contractmoneypredict2rmb" jdbcType="DOUBLE" property="contractmoneypredict2rmb" />
    <result column="contractmoneypredict3rmb" jdbcType="DOUBLE" property="contractmoneypredict3rmb" />
    <result column="contractmoneypredict4rmb" jdbcType="DOUBLE" property="contractmoneypredict4rmb" />
    <result column="contractmoneypredict5rmb" jdbcType="DOUBLE" property="contractmoneypredict5rmb" />
    <result column="dailycostrmb" jdbcType="DOUBLE" property="dailycostrmb" />
    <result column="contractsignperson" jdbcType="NVARCHAR" property="contractsignperson" />
    <result column="contractbelongcnooc" jdbcType="NVARCHAR" property="contractbelongcnooc" />
    <result column="contractinprocess" jdbcType="NVARCHAR" property="contractinprocess" />
    <result column="contractsignificant" jdbcType="NVARCHAR" property="contractsignificant" />
    <result column="contractyearlycnooc" jdbcType="NVARCHAR" property="contractyearlycnooc" />
    <result column="comments" jdbcType="NVARCHAR" property="comments" />
    <result column="submitTime" jdbcType="TIMESTAMP" property="submittime" />
  </resultMap>
  <resultMap id="BaseResultMap1" type="com.example.demo.model.HomeAllLedger">

    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="contractyear" jdbcType="INTEGER" property="contractyear" />

    <result column="contractdepartment" jdbcType="NVARCHAR" property="contractdepartment" />
    <result column="contractopdepartment" jdbcType="NVARCHAR" property="contractopdepartment" />
    <result column="contractobject" jdbcType="NVARCHAR" property="contractobject" />
    <result column="bidoprateregion" jdbcType="NVARCHAR" property="bidoprateregion" />

    <result column="contractid" jdbcType="NVARCHAR" property="contractid" />
    <result column="contractid2" jdbcType="NVARCHAR" property="contractid2" />
    <result column="contractsigndate" jdbcType="DATE" property="contractsigndate" />
    <result column="constructionstartdate" jdbcType="DATE" property="constructionstartdate" />
    <result column="constructionenddate" jdbcType="DATE" property="constructionenddate" />
    <result column="contractmoneypredict0cny" jdbcType="DOUBLE" property="contractmoneypredict0cny" />
    <result column="contractmoneypredict0usd" jdbcType="DOUBLE" property="contractmoneypredict0usd" />
    <result column="contractmoneypredicttotal0rmb" jdbcType="DOUBLE" property="contractmoneypredicttotal0rmb" />
    <result column="contractmoneypredicttotal0usd" jdbcType="DOUBLE" property="contractmoneypredicttotal0usd" />
    <result column="contractmoneypredict1rmb" jdbcType="DOUBLE" property="contractmoneypredict1rmb" />
    <result column="contractmoneypredict2rmb" jdbcType="DOUBLE" property="contractmoneypredict2rmb" />
    <result column="contractmoneypredict3rmb" jdbcType="DOUBLE" property="contractmoneypredict3rmb" />
    <result column="contractmoneypredict4rmb" jdbcType="DOUBLE" property="contractmoneypredict4rmb" />
    <result column="contractmoneypredict5rmb" jdbcType="DOUBLE" property="contractmoneypredict5rmb" />
    <result column="dailycostrmb" jdbcType="DOUBLE" property="dailycostrmb" />
    <result column="contractsignperson" jdbcType="NVARCHAR" property="contractsignperson" />
    <result column="contractbelongcnooc" jdbcType="NVARCHAR" property="contractbelongcnooc" />
    <result column="contractinprocess" jdbcType="NVARCHAR" property="contractinprocess" />
    <result column="contractsignificant" jdbcType="NVARCHAR" property="contractsignificant" />
    <result column="contractyearlycnooc" jdbcType="NVARCHAR" property="contractyearlycnooc" />
    <result column="comments" jdbcType="NVARCHAR" property="comments" />
    <result column="submitTime" jdbcType="TIMESTAMP" property="submittime" />
  </resultMap>
  <sql id="Base_Column_List">
    id, contractid, contractid2, contractsigndate, constructionstartdate, constructionenddate, 
    contractmoneypredict0cny, contractmoneypredict0usd, contractmoneypredicttotal0rmb, 
    contractmoneypredicttotal0usd, contractmoneypredict1rmb, contractmoneypredict2rmb, 
    contractmoneypredict3rmb, contractmoneypredict4rmb, contractmoneypredict5rmb, dailycostrmb, 
    contractsignperson, contractbelongcnooc, contractinprocess, contractsignificant, 
    contractyearlycnooc, comments, submitTime
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from ContractLedger
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="getAll"  resultMap="BaseResultMap">
    select * from ContractLedger
  </select>
  <select id="getByProjectid" parameterType="java.lang.String" resultMap="BaseResultMap">
    select ContractLedger.id,ContractLedger.contractid, ContractLedger.contractid2, ContractLedger.contractsigndate, ContractLedger.constructionstartdate, ContractLedger.constructionenddate,
    ContractLedger.contractmoneypredict0cny, ContractLedger.contractmoneypredict0usd, ContractLedger.contractmoneypredicttotal0rmb,
    ContractLedger.contractmoneypredicttotal0usd, ContractLedger.contractmoneypredict1rmb, ContractLedger.contractmoneypredict2rmb,
    ContractLedger.contractmoneypredict3rmb, ContractLedger.contractmoneypredict4rmb, ContractLedger.contractmoneypredict5rmb, ContractLedger.dailycostrmb,
    ContractLedger.contractsignperson, ContractLedger.contractbelongcnooc, ContractLedger.contractinprocess, ContractLedger.contractsignificant,
    ContractLedger.contractyearlycnooc, ContractLedger.comments, ContractLedger.submitTime
    from ContractLedger,RelationProjectLedger
    where RelationProjectLedger.projectid=#{projectid,jdbcType=NVARCHAR} and RelationProjectLedger.ledgerid=ContractLedger.id;
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    delete from ContractLedger
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.example.demo.entity.ContractLedger">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    insert into ContractLedger (id, contractid, contractid2, 
      contractsigndate, constructionstartdate, constructionenddate, 
      contractmoneypredict0cny, contractmoneypredict0usd, 
      contractmoneypredicttotal0rmb, contractmoneypredicttotal0usd, 
      contractmoneypredict1rmb, contractmoneypredict2rmb, 
      contractmoneypredict3rmb, contractmoneypredict4rmb, 
      contractmoneypredict5rmb, dailycostrmb, contractsignperson, 
      contractbelongcnooc, contractinprocess, 
      contractsignificant, contractyearlycnooc, 
      comments, submitTime)
    values (#{id,jdbcType=INTEGER}, #{contractid,jdbcType=NVARCHAR}, #{contractid2,jdbcType=NVARCHAR}, 
      #{contractsigndate,jdbcType=DATE}, #{constructionstartdate,jdbcType=DATE}, #{constructionenddate,jdbcType=DATE}, 
      #{contractmoneypredict0cny,jdbcType=DOUBLE}, #{contractmoneypredict0usd,jdbcType=DOUBLE}, 
      #{contractmoneypredicttotal0rmb,jdbcType=DOUBLE}, #{contractmoneypredicttotal0usd,jdbcType=DOUBLE}, 
      #{contractmoneypredict1rmb,jdbcType=DOUBLE}, #{contractmoneypredict2rmb,jdbcType=DOUBLE}, 
      #{contractmoneypredict3rmb,jdbcType=DOUBLE}, #{contractmoneypredict4rmb,jdbcType=DOUBLE}, 
      #{contractmoneypredict5rmb,jdbcType=DOUBLE}, #{dailycostrmb,jdbcType=DOUBLE}, #{contractsignperson,jdbcType=NVARCHAR}, 
      #{contractbelongcnooc,jdbcType=NVARCHAR}, #{contractinprocess,jdbcType=NVARCHAR}, 
      #{contractsignificant,jdbcType=NVARCHAR}, #{contractyearlycnooc,jdbcType=NVARCHAR}, 
      #{comments,jdbcType=NVARCHAR}, #{submittime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.example.demo.entity.ContractLedger" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
    insert into ContractLedger
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="contractid != null">
        contractid,
      </if>
      <if test="contractid2 != null">
        contractid2,
      </if>
      <if test="contractsigndate != null">
        contractsigndate,
      </if>
      <if test="constructionstartdate != null">
        constructionstartdate,
      </if>
      <if test="constructionenddate != null">
        constructionenddate,
      </if>
      <if test="contractmoneypredict0cny != null">
        contractmoneypredict0cny,
      </if>
      <if test="contractmoneypredict0usd != null">
        contractmoneypredict0usd,
      </if>
      <if test="contractmoneypredicttotal0rmb != null">
        contractmoneypredicttotal0rmb,
      </if>
      <if test="contractmoneypredicttotal0usd != null">
        contractmoneypredicttotal0usd,
      </if>
      <if test="contractmoneypredict1rmb != null">
        contractmoneypredict1rmb,
      </if>
      <if test="contractmoneypredict2rmb != null">
        contractmoneypredict2rmb,
      </if>
      <if test="contractmoneypredict3rmb != null">
        contractmoneypredict3rmb,
      </if>
      <if test="contractmoneypredict4rmb != null">
        contractmoneypredict4rmb,
      </if>
      <if test="contractmoneypredict5rmb != null">
        contractmoneypredict5rmb,
      </if>
      <if test="dailycostrmb != null">
        dailycostrmb,
      </if>
      <if test="contractsignperson != null">
        contractsignperson,
      </if>
      <if test="contractbelongcnooc != null">
        contractbelongcnooc,
      </if>
      <if test="contractinprocess != null">
        contractinprocess,
      </if>
      <if test="contractsignificant != null">
        contractsignificant,
      </if>
      <if test="contractyearlycnooc != null">
        contractyearlycnooc,
      </if>
      <if test="comments != null">
        comments,
      </if>
      <if test="submittime != null">
        submitTime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="contractid != null">
        #{contractid,jdbcType=NVARCHAR},
      </if>
      <if test="contractid2 != null">
        #{contractid2,jdbcType=NVARCHAR},
      </if>
      <if test="contractsigndate != null">
        #{contractsigndate,jdbcType=DATE},
      </if>
      <if test="constructionstartdate != null">
        #{constructionstartdate,jdbcType=DATE},
      </if>
      <if test="constructionenddate != null">
        #{constructionenddate,jdbcType=DATE},
      </if>
      <if test="contractmoneypredict0cny != null">
        #{contractmoneypredict0cny,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict0usd != null">
        #{contractmoneypredict0usd,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredicttotal0rmb != null">
        #{contractmoneypredicttotal0rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredicttotal0usd != null">
        #{contractmoneypredicttotal0usd,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict1rmb != null">
        #{contractmoneypredict1rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict2rmb != null">
        #{contractmoneypredict2rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict3rmb != null">
        #{contractmoneypredict3rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict4rmb != null">
        #{contractmoneypredict4rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict5rmb != null">
        #{contractmoneypredict5rmb,jdbcType=DOUBLE},
      </if>
      <if test="dailycostrmb != null">
        #{dailycostrmb,jdbcType=DOUBLE},
      </if>
      <if test="contractsignperson != null">
        #{contractsignperson,jdbcType=NVARCHAR},
      </if>
      <if test="contractbelongcnooc != null">
        #{contractbelongcnooc,jdbcType=NVARCHAR},
      </if>
      <if test="contractinprocess != null">
        #{contractinprocess,jdbcType=NVARCHAR},
      </if>
      <if test="contractsignificant != null">
        #{contractsignificant,jdbcType=NVARCHAR},
      </if>
      <if test="contractyearlycnooc != null">
        #{contractyearlycnooc,jdbcType=NVARCHAR},
      </if>
      <if test="comments != null">
        #{comments,jdbcType=NVARCHAR},
      </if>
      <if test="submittime != null">
        #{submittime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.example.demo.entity.ContractLedger">
    update ContractLedger
    <set>
      <if test="contractid != null">
        contractid = #{contractid,jdbcType=NVARCHAR},
      </if>
      <if test="contractid2 != null">
        contractid2 = #{contractid2,jdbcType=NVARCHAR},
      </if>
      <if test="contractsigndate != null">
        contractsigndate = #{contractsigndate,jdbcType=DATE},
      </if>
      <if test="constructionstartdate != null">
        constructionstartdate = #{constructionstartdate,jdbcType=DATE},
      </if>
      <if test="constructionenddate != null">
        constructionenddate = #{constructionenddate,jdbcType=DATE},
      </if>
      <if test="contractmoneypredict0cny != null">
        contractmoneypredict0cny = #{contractmoneypredict0cny,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict0usd != null">
        contractmoneypredict0usd = #{contractmoneypredict0usd,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredicttotal0rmb != null">
        contractmoneypredicttotal0rmb = #{contractmoneypredicttotal0rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredicttotal0usd != null">
        contractmoneypredicttotal0usd = #{contractmoneypredicttotal0usd,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict1rmb != null">
        contractmoneypredict1rmb = #{contractmoneypredict1rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict2rmb != null">
        contractmoneypredict2rmb = #{contractmoneypredict2rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict3rmb != null">
        contractmoneypredict3rmb = #{contractmoneypredict3rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict4rmb != null">
        contractmoneypredict4rmb = #{contractmoneypredict4rmb,jdbcType=DOUBLE},
      </if>
      <if test="contractmoneypredict5rmb != null">
        contractmoneypredict5rmb = #{contractmoneypredict5rmb,jdbcType=DOUBLE},
      </if>
      <if test="dailycostrmb != null">
        dailycostrmb = #{dailycostrmb,jdbcType=DOUBLE},
      </if>
      <if test="contractsignperson != null">
        contractsignperson = #{contractsignperson,jdbcType=NVARCHAR},
      </if>
      <if test="contractbelongcnooc != null">
        contractbelongcnooc = #{contractbelongcnooc,jdbcType=NVARCHAR},
      </if>
      <if test="contractinprocess != null">
        contractinprocess = #{contractinprocess,jdbcType=NVARCHAR},
      </if>
      <if test="contractsignificant != null">
        contractsignificant = #{contractsignificant,jdbcType=NVARCHAR},
      </if>
      <if test="contractyearlycnooc != null">
        contractyearlycnooc = #{contractyearlycnooc,jdbcType=NVARCHAR},
      </if>
      <if test="comments != null">
        comments = #{comments,jdbcType=NVARCHAR},
      </if>
      <if test="submittime != null">
        submitTime = #{submittime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.example.demo.entity.ContractLedger">
    update ContractLedger
    set contractid = #{contractid,jdbcType=NVARCHAR},
      contractid2 = #{contractid2,jdbcType=NVARCHAR},
      contractsigndate = #{contractsigndate,jdbcType=DATE},
      constructionstartdate = #{constructionstartdate,jdbcType=DATE},
      constructionenddate = #{constructionenddate,jdbcType=DATE},
      contractmoneypredict0cny = #{contractmoneypredict0cny,jdbcType=DOUBLE},
      contractmoneypredict0usd = #{contractmoneypredict0usd,jdbcType=DOUBLE},
      contractmoneypredicttotal0rmb = #{contractmoneypredicttotal0rmb,jdbcType=DOUBLE},
      contractmoneypredicttotal0usd = #{contractmoneypredicttotal0usd,jdbcType=DOUBLE},
      contractmoneypredict1rmb = #{contractmoneypredict1rmb,jdbcType=DOUBLE},
      contractmoneypredict2rmb = #{contractmoneypredict2rmb,jdbcType=DOUBLE},
      contractmoneypredict3rmb = #{contractmoneypredict3rmb,jdbcType=DOUBLE},
      contractmoneypredict4rmb = #{contractmoneypredict4rmb,jdbcType=DOUBLE},
      contractmoneypredict5rmb = #{contractmoneypredict5rmb,jdbcType=DOUBLE},
      dailycostrmb = #{dailycostrmb,jdbcType=DOUBLE},
      contractsignperson = #{contractsignperson,jdbcType=NVARCHAR},
      contractbelongcnooc = #{contractbelongcnooc,jdbcType=NVARCHAR},
      contractinprocess = #{contractinprocess,jdbcType=NVARCHAR},
      contractsignificant = #{contractsignificant,jdbcType=NVARCHAR},
      contractyearlycnooc = #{contractyearlycnooc,jdbcType=NVARCHAR},
      comments = #{comments,jdbcType=NVARCHAR},
      submitTime = #{submittime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="HomeLedgerAll" parameterType="com.example.demo.model.LedgerSelect" resultMap="BaseResultMap1" >
    select p.projectid,p.projectname,p.contractyear,p.contractdepartment,
    p.contractopdepartment,p.contractobject,p.bidoprateregion,c.*
    from ContractLedger c,RelationProjectLedger r,Project p
    where r.projectid=p.projectid and r.ledgerid=c.id
    <if test="projectid != null and projectid !=''">
      and p.projectid = #{projectid}
    </if>
    <if test="projectname != null and projectname !=''">
      and p.projectname = #{projectname}
    </if>
    <if test="contractid != null and contractid !=''">
      and c.contractid = #{contractid}
    </if>
    <if test="contractyear != 0">
      and p.contractyear = #{contractyear}
    </if>
    <if test="contractid2 != null and contractid2 !=''">
      and c.contractid2 = #{contractid2}
    </if>
    <if test="contractsignperson != null and contractsignperson !=''">
      and c.contractsignperson = #{contractsignperson}
    </if>
    <if test="contractbelongcnooc != null and contractbelongcnooc !=''">
      and c.contractbelongcnooc = #{contractbelongcnooc}
    </if>
    <if test="contractinprocess != null and contractinprocess !=''">
      and c.contractinprocess = #{contractinprocess}
    </if>
    <if test="contractsignificant !=null and contractsignificant !=''">
      and c.contractsignificant = #{contractsignificant}
    </if>
    <if test="contractyearlycnooc !=null and contractyearlycnooc !=''">
      and c.contractyearlycnooc = #{contractyearlycnooc}
    </if>
    <if test="starttime != null">
      and c.contractsigndate &gt;= #{starttime}
    </if>
    <if test="endtime != null">
      and c.contractsigndate &lt;= #{endtime}
    </if>
  </select>
  <select id="ProjectLedgerAll" resultMap="BaseResultMap1" >
    select p.projectid,p.projectname,p.contractyear,p.contractdepartment,
    p.contractopdepartment,p.contractobject,p.bidoprateregion,c.*
    from ContractLedger c,RelationProjectLedger r,Project p
    where r.projectid=p.projectid and r.ledgerid=c.id and p.projectid=#{id}
  </select>
  <select id="getMonthlyForDownload">
    select p.projectid,p.projectname,c.* from Project as p left join RelationProjectLedger as r
    on r.projectid=p.projectid  left join ContractLedger as c on r.ledgerid=c.id
    where c.submitTime &gt;= #{starttime} and c.submitTime  &lt;= #{endtime}
  </select>
</mapper>