<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.BiddingMapper">
  <resultMap id="BaseResultMap" type="com.example.demo.entity.Bidding">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="bidtargetmoney" jdbcType="DOUBLE" property="bidtargetmoney" />
    <result column="bidreview" jdbcType="NVARCHAR" property="bidreview" />
    <result column="bidopenresult" jdbcType="NVARCHAR" property="bidopenresult" />
    <result column="biddiscardreason" jdbcType="NVARCHAR" property="biddiscardreason" />
    <result column="bidlossreason" jdbcType="NVARCHAR" property="bidlossreason" />
    <result column="submitTime" jdbcType="TIMESTAMP" property="submittime" />
  </resultMap>
  <resultMap id="BaseResultMap1" type="com.example.demo.model.HomeAllBidding">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />

    <result column="bidtargetmoney" jdbcType="DOUBLE" property="bidtargetmoney" />
    <result column="bidreview" jdbcType="NVARCHAR" property="bidreview" />
    <result column="bidopenresult" jdbcType="NVARCHAR" property="bidopenresult" />
    <result column="biddiscardreason" jdbcType="NVARCHAR" property="biddiscardreason" />
    <result column="bidlossreason" jdbcType="NVARCHAR" property="bidlossreason" />
    <result column="submitTime" jdbcType="TIMESTAMP" property="submittime" />
  </resultMap>
  <resultMap id="BaseResultMap2" type="com.example.demo.model.BiddingAll">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="bidtargetmoney" jdbcType="DOUBLE" property="bidtargetmoney" />
    <result column="bidreview" jdbcType="NVARCHAR" property="bidreview" />
    <result column="bidopenresult" jdbcType="NVARCHAR" property="bidopenresult" />
    <result column="biddiscardreason" jdbcType="NVARCHAR" property="biddiscardreason" />
    <result column="bidlossreason" jdbcType="NVARCHAR" property="bidlossreason" />
    <result column="submitTime" jdbcType="TIMESTAMP" property="submittime" />

    <result column="projectid" jdbcType="NVARCHAR" property="projectid" />
    <result column="projectname" jdbcType="NVARCHAR" property="projectname" />
    <result column="department" jdbcType="NVARCHAR" property="department" />
    <result column="bidabroad" jdbcType="NVARCHAR" property="bidabroad" />
    <result column="bidid" jdbcType="NVARCHAR" property="bidid" />
    <result column="bidreceivedate" jdbcType="DATE" property="bidreceivedate" />
    <result column="bidstopdate" jdbcType="DATE" property="bidstopdate" />

    <result column="bidregion" jdbcType="NVARCHAR" property="bidregion" />
    <result column="bidrecordyn" jdbcType="NVARCHAR" property="bidrecordyn" />
    <result column="bidsafegrade" jdbcType="NVARCHAR" property="bidsafegrade" />
    <result column="bidguaranteeyn" jdbcType="NVARCHAR" property="bidguaranteeyn" />
    <result column="bidguaranteetype" jdbcType="NVARCHAR" property="bidguaranteetype" />
    <result column="bidguaranteemoney" jdbcType="DOUBLE" property="bidguaranteemoney" />
    <result column="bidoperator" jdbcType="NVARCHAR" property="bidoperator" />
    <result column="bidoprateregion" jdbcType="NVARCHAR" property="bidoprateregion" />
    <result column="bidservicetype" jdbcType="NVARCHAR" property="bidservicetype" />
    <result column="bidworkload" jdbcType="NVARCHAR" property="bidworkload" />

  </resultMap>
  <sql id="Base_Column_List">
    id, bidtargetmoney, bidreview, bidopenresult, biddiscardreason, bidlossreason, submitTime
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    select 
    <include refid="Base_Column_List" />
    from Bidding
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    delete from Bidding
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.example.demo.entity.Bidding">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    insert into Bidding (id, bidtargetmoney, bidreview, 
      bidopenresult, biddiscardreason, bidlossreason, 
      submitTime)
    values (#{id,jdbcType=INTEGER}, #{bidtargetmoney,jdbcType=DOUBLE}, #{bidreview,jdbcType=NVARCHAR}, 
      #{bidopenresult,jdbcType=NVARCHAR}, #{biddiscardreason,jdbcType=NVARCHAR}, #{bidlossreason,jdbcType=NVARCHAR}, 
      #{submittime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.example.demo.entity.Bidding" useGeneratedKeys="true" keyColumn="id" keyProperty="id">
    insert into Bidding
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="bidtargetmoney != null">
        bidtargetmoney,
      </if>
      <if test="bidreview != null">
        bidreview,
      </if>
      <if test="bidopenresult != null">
        bidopenresult,
      </if>
      <if test="biddiscardreason != null">
        biddiscardreason,
      </if>
      <if test="bidlossreason != null">
        bidlossreason,
      </if>
      <if test="submittime != null">
        submitTime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="bidtargetmoney != null">
        #{bidtargetmoney,jdbcType=DOUBLE},
      </if>
      <if test="bidreview != null">
        #{bidreview,jdbcType=NVARCHAR},
      </if>
      <if test="bidopenresult != null">
        #{bidopenresult,jdbcType=NVARCHAR},
      </if>
      <if test="biddiscardreason != null">
        #{biddiscardreason,jdbcType=NVARCHAR},
      </if>
      <if test="bidlossreason != null">
        #{bidlossreason,jdbcType=NVARCHAR},
      </if>
      <if test="submittime != null">
        #{submittime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.example.demo.entity.Bidding">
    update Bidding
    <set>
      <if test="bidtargetmoney != null">
        bidtargetmoney = #{bidtargetmoney,jdbcType=DOUBLE},
      </if>
      <if test="bidreview != null">
        bidreview = #{bidreview,jdbcType=NVARCHAR},
      </if>
      <if test="bidopenresult != null">
        bidopenresult = #{bidopenresult,jdbcType=NVARCHAR},
      </if>
      <if test="biddiscardreason != null">
        biddiscardreason = #{biddiscardreason,jdbcType=NVARCHAR},
      </if>
      <if test="bidlossreason != null">
        bidlossreason = #{bidlossreason,jdbcType=NVARCHAR},
      </if>
      <if test="submittime != null">
        submitTime = #{submittime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.example.demo.entity.Bidding">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Jul 17 22:42:39 CST 2019.
    -->
    update Bidding
    set bidtargetmoney = #{bidtargetmoney,jdbcType=DOUBLE},
      bidreview = #{bidreview,jdbcType=NVARCHAR},
      bidopenresult = #{bidopenresult,jdbcType=NVARCHAR},
      biddiscardreason = #{biddiscardreason,jdbcType=NVARCHAR},
      bidlossreason = #{bidlossreason,jdbcType=NVARCHAR},
      submitTime = #{submittime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="getAll" parameterType="java.lang.String" resultMap="BaseResultMap">
    select <include refid="Base_Column_List" /> from Bidding
  </select>
  <select id="getHomeBiddingAll" parameterType="java.lang.String" resultMap="BaseResultMap1">
    select Project.projectid,Project.projectname,Bidding.id,Bidding.bidtargetmoney,Bidding.bidreview,Bidding.bidopenresult,Bidding.biddiscardreason,Bidding.bidlossreason,Bidding.submitTime
    from Bidding,RelationProjectBidding,Project
    where RelationProjectBidding.projectid=Project.projectid and RelationProjectBidding.biddingid=Bidding.id;
  </select>
  <select id="getByProjectid" parameterType="java.lang.String" resultMap="BaseResultMap">
    select Bidding.id,Bidding.bidtargetmoney,Bidding.bidreview,Bidding.bidopenresult,Bidding.biddiscardreason,Bidding.bidlossreason,Bidding.submitTime
    from Bidding,RelationProjectBidding
    where RelationProjectBidding.projectid=#{projectid,jdbcType=NVARCHAR} and RelationProjectBidding.biddingid=Bidding.id;
  </select>
  <select id="AllBiddingAll"  parameterType="com.example.demo.model.BiddingSelect" resultMap="BaseResultMap2">
    select b.id,b.biddiscardreason,b.bidlossreason,b.bidopenresult,b.bidreview,b.bidtargetmoney,b.submitTime,
	p.department,p.projectid,p.projectname,p.bidabroad,p.bidguaranteemoney,p.bidguaranteeyn,p.bidguaranteetype,p.bidid,p.bidoperator,p.bidoprateregion,
	p.bidreceivedate,p.bidrecordyn,p.bidregion,p.bidsafegrade,p.bidservicetype,p.bidstopdate,p.bidworkload,p.projectprogress,p.projectproblem
    from Bidding b,RelationProjectBidding r,Project p
    where r.projectid=p.projectid and r.biddingid=b.id
    <if test="department != null and department!=''">
    and  p.department = #{department}
    </if>
    <if test="bidreceivedate != null">
      and  b.submitTime &gt;= #{bidreceivedate}
    </if>
    <if test="bidstopdate != null">
      and  b.submitTime &lt;= #{bidstopdate}
    </if>
  </select>
  <select id="ProjectBiddingAll"  parameterType="java.lang.String" resultMap="BaseResultMap2">
    select b.id,b.biddiscardreason,b.bidlossreason,b.bidopenresult,b.bidreview,b.bidtargetmoney,b.submitTime,
	p.department,p.projectid,p.projectname,p.bidabroad,p.bidguaranteemoney,p.bidguaranteeyn,p.bidguaranteetype,p.bidid,p.bidoperator,p.bidoprateregion,
	p.bidreceivedate,p.bidrecordyn,p.bidregion,p.bidsafegrade,p.bidservicetype,p.bidstopdate,p.bidworkload
    from Bidding b,RelationProjectBidding r,Project p
    where r.projectid=p.projectid and r.biddingid=b.id and p.projectid=#{id};
  </select>
</mapper>